<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AI Archives Assistant - USF</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f2f2f2;
      margin: 0;
      padding: 0;
    }

    header {
      background-color: #006747;
      color: white;
      padding: 0.65em 1em;
      display: flex;
      align-items: center;
    }

    header img {
      height: 40px;
      margin-right: 1em;
    }

    header h1 {
      font-size: 1.5em;
      margin: 0;
    }

    main {
      max-width: 800px;
      margin: 2em auto;
      padding: 1em;
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    #prompt-form {
      margin-bottom: 1em;
    }

    #prompt {
      width: 100%;
      padding: 0.5em;
      font-size: 1em;
    }

    .result-card {
      display: flex;
      align-items: flex-start;
      background-color: #fefefe;
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 1em;
      margin-bottom: 1em;
      box-shadow: 1px 1px 5px rgba(0,0,0,0.05);
    }

    .thumbnail {
      width: 50px;
      height: 50px;
      object-fit: contain;
      margin-right: 1em;
    }

    .title {
      margin: 0 0 0.3em;
    }

    .description {
      margin: 0 0 0.5em;
    }

    footer {
      text-align: center;
      font-size: 0.8em;
      color: #666;
      margin-top: 2em;
      padding: 1em;
    }
  </style>
</head>
<body>

<header>
  <img src="icon.png" alt="USF logo" />
  <h1>University of South Florida - AI Archives Assistant</h1>
</header>

<main>
  <form id="prompt-form">
    <label for="prompt">Ask about the archives:</label>
    <input type="text" id="prompt" name="prompt" placeholder="e.g., civil rights collections in Tampa..." />
    <button type="submit">Ask</button>
  </form>

  <div id="response-box"></div>
</main>

<footer>
  &copy; 2025 University of South Florida Libraries – Special Collections
</footer>

<script>
  const metadata = [
    {
      title: "Tony Pizzo Collection",
      description: "Personal papers, research notes, and historical materials assembled by Tony Pizzo, a civic historian known for documenting the history of Tampa, Ybor City, and surrounding communities.",
      url: "https://archives.lib.usf.edu/repositories/2/resources/371"
    },
    {
      title: "Centro Español de Tampa Collection",
      description: "Historical records of one of Tampa’s major Spanish immigrant mutual aid societies.",
      url: "https://archives.lib.usf.edu/repositories/2/resources/567"
    },
    {
      title: "Bobby Smith Photograph Collection",
      description: "Documents the region’s LGBTQ history through photographs and ephemera.",
      url: "https://archives.lib.usf.edu/repositories/2/resources/269"
    },
    {
      title: "Equality Florida Records",
      description: "Organizational records documenting LGBTQ+ advocacy and events in Florida.",
      url: "https://archives.lib.usf.edu/repositories/2/resources/496"
    },
    {
      title: "Tampa International Gay and Lesbian Film Festival Records",
      description: "Posters, programs, and records from the LGBTQ+ film festival in Tampa.",
      url: "https://archives.lib.usf.edu/repositories/2/resources/641"
    },
    {
      title: "Environmental Lands Acquisition and Protection Program (ELAPP) Collection",
      description: "Documents land conservation efforts in Hillsborough County.",
      url: "https://archives.lib.usf.edu/repositories/2/resources/65"
    },
    {
      title: "Jan K. Platt Papers",
      description: "Materials from city councilwoman and commissioner Jan Platt.",
      url: "https://archives.lib.usf.edu/repositories/2/resources/222"
    },
    {
      title: "Al Davis Papers",
      description: "Documents the life of African American educator and civic leader Al Davis.",
      url: "https://archives.lib.usf.edu/repositories/2/resources/40"
    },
    {
      title: "Robert W. and Helen S. Saunders Papers",
      description: "Papers of civil rights activists tied to the NAACP and social justice.",
      url: "https://archives.lib.usf.edu/repositories/2/resources/313"
    },
    {
      title: "Walter P. Fuller Papers",
      description: "Civic leader Walter Fuller's correspondence on St. Petersburg development.",
      url: "https://archives.lib.usf.edu/repositories/2/resources/531"
    },
    {
      title: "IMC Agrico Phosphate Company Collection",
      description: "Corporate records about phosphate mining in Central Florida.",
      url: "https://archives.lib.usf.edu/repositories/2/resources/434"
    },
    {
      title: "Sally Thompson Collection",
      description: "Documents on civic leadership, planning, and preservation in Tampa Bay.",
      url: "https://archives.lib.usf.edu/repositories/2/resources/617"
    },
    {
      title: "Audubon Society Corkscrew Swamp Sanctuary Records",
      description: "Environmental records from the Corkscrew Swamp Sanctuary.",
      url: "https://archives.lib.usf.edu/repositories/2/resources/583"
    }
  ];

  document.getElementById("prompt-form").addEventListener("submit", async function (e) {
    e.preventDefault();

    const promptText = document.getElementById("prompt").value.trim();
    const responseBox = document.getElementById("response-box");
    responseBox.innerHTML = "";

    if (!promptText) return;

    const response = await fetch("https://your-replit-url.replit.app/ask", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        query: promptText,
        context: metadata
      })
    });

    if (!response.body) {
      responseBox.innerHTML = "<p>Error: No response body.</p>";
      return;
    }

    const reader = response.body.getReader();
    const decoder = new TextDecoder();
    let fullText = "";

    while (true) {
      const { value, done } = await reader.read();
      if (done) break;
      const chunk = decoder.decode(value, { stream: true });
      fullText += chunk;
      responseBox.innerHTML = fullText;
    }
  });
</script>

</body>
</html>
